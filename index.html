<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dev Shopify Ragutune</title>

  <!-- ページ固有CSS -->
  <link rel="stylesheet" href="./style.css" />

  <!-- Swiper CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"
  />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Allura&family=Mulish:wght@200;400;700;900&family=Noto+Sans+JP:wght@300;400;700;900&display=swap"
    rel="stylesheet"
  />

  <!-- Adobe Fonts -->
  <link rel="stylesheet" href="https://use.typekit.net/duu5afd.css" />
</head>

<body>

  <!-- ▼ partials ▼ -->
  <div id="header-include"></div>
  <div id="section1-include"></div>
  <div id="section2-include"></div>
  <div id="section3-include"></div>

  <!-- Swiper -->
  <div class="swiper client-swiper">
    <div class="swiper-wrapper">

      <!-- ユカイ -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_yukai.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>ストア構築</li>
          </ul>
          <p class="client_name">ユカイ工学オンラインストア</p>
          <p class="business">テクノロジー・ロボティクス</p>
          <button type="button" onclick="window.open('https://store.ux-xu.com/', '_blank')">Website</button>
        </div>
      </div>

      <!-- erva -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_erva.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>ストア構築</li>
            <li>運用保守</li>
          </ul>
          <p class="client_name">ドッグスリング専門店ERVA</p>
          <p class="business">ペット用品（ドッグギア）</p>
          <button type="button" onclick="window.open('https://www.erva-dog.com/', '_blank')">Website</button>
        </div>
      </div>
      
      <!-- heartknife -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_hk.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>ストア構築</li>
          </ul>
          <p class="client_name">HEART KNIFE</p>
          <p class="business">ギフト・雑貨</p>
          <button type="button" onclick="window.open('https://heart-knife.com/', '_blank')">Website</button>
        </div>
      </div>

      <!-- baintl -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_baintl.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>ストア構築</li>
          </ul>
          <p class="client_name">BICI AMORE</p>
          <p class="business">スポーツ用品・自転車販売</p>
          <button type="button" onclick="window.open('https://web-store.biciamore.jp/', '_blank')">Website</button>
        </div>
      </div>

      <!-- mzkn -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_mizkan.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>UI/UX構築</li>
            <li>デザイン定義書作成</li>
          </ul>
          <p class="client_name">mizkan公式通販</p>
          <p class="business">食品・調味料</p>
          <button type="button" onclick="window.open('https://shop.mizkan.co.jp/', '_blank')">Website</button>
        </div>
      </div>

      <!-- drescco -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_drescco.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>ストア構築</li>
          </ul>
          <p class="client_name">DRESCCO</p>
          <p class="business">キッズアパレル</p>
          <button type="button" onclick="window.open('https://drescco.com/', '_blank')">Website</button>
        </div>
      </div>

      <!-- zenb -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_zenb.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>UI/UX構築</li>
            <li>デザイン定義書作成</li>
          </ul>
          <p class="client_name">ZENB</p>
          <p class="business">ヘルスフード D2Cブランド</p>
          <button type="button" onclick="window.open('https://zenb.jp/', '_blank')">Website</button>
        </div>
      </div>

      <!-- 道の駅 -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_hotaru.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>ストア構築</li>
          </ul>
          <p class="client_name">蛍街道西ノ市</p>
          <p class="business">地域特産品・観光施設</p>
          <button type="button" onclick="window.open('https://toyota-hotaru.com/', '_blank')">Website</button>
        </div>
      </div>

      <!-- cc -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_cc.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>ストア構築</li>
          </ul>
          <p class="client_name">カウボーイクラフト</p>
          <p class="business">ブルワリー用品・醸造機材</p>
          <button type="button" onclick="window.open('https://cowboycraftjapan.com/', '_blank')">Website</button>
        </div>
      </div>

      <!-- tm -->
      <div class="swiper-slide">
        <div class="client-image"><img src="./images/client_tm.webp" alt=""></div>
        <div class="client-meta">
          <ul style="list-style: none;">
            <li>ストア構築</li>
          </ul>
          <p class="client_name">taichimurakami</p>
          <p class="business">デザイナー／ファッションブランド運営</p>
          <button type="button" onclick="window.open('https://taichimurakami.com/', '_blank')">Website</button>
        </div>
      </div>

    </div>

    <!-- Arrows -->
    <div class="client-swiper-controls">
      <div class="swiper-button-prev"><img src="./images/swipe-arrow-prev.svg"></div>
      <span><img src="./images/swipe-arrow-devider.svg"></span>
      <div class="swiper-button-next"><img src="./images/swipe-arrow-next.svg"></div>
    </div>

    <!-- counter -->
   <div class="swiper-counter"><span class="current">1</span>/<span class="total">1</span></div>
  </div>

  <div id="section4-include"></div>
  <div id="footer-include"></div>

  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>

  <!-- ▼ partial include script ▼ -->
  <script>
    const includes = [
      { id: "header-include", file: "./partials/header.html" },
      { id: "section1-include", file: "./partials/section1.html" },
      { id: "section2-include", file: "./partials/section2.html" },
      { id: "section3-include", file: "./partials/section3.html" },
      { id: "section4-include", file: "./partials/section4.html" },
      { id: "footer-include", file: "./partials/footer.html" },
    ];

    // ▼ partial 読み込み
    Promise.all(
      includes.map((part) =>
        fetch(part.file)
          .then((res) => res.text())
          .then((html) => {
            document.getElementById(part.id).innerHTML = html;
          })
      )
    ).then(() => {

      // script.js を最後にロード（1回だけ）
      const mainScript = document.createElement("script");
      mainScript.src = "./script.js";
      document.body.appendChild(mainScript);

      // partials 完了イベント発火
      document.dispatchEvent(new Event("partialsLoaded"));
    });

    // ▼ partialsLoaded 後の処理
    document.addEventListener("partialsLoaded", () => {

      // section 個別JSをまとめて呼ぶ
      if (window.initSections) window.initSections();

      // Swiper（DOM完成後に再初期化）
      const swiper = new Swiper(".client-swiper", {
      loop: true,
      centeredSlides: true,
      slidesPerView: "auto", // または 1・3など用途に応じて
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
      spaceBetween: 16, // ← デフォルト（モバイル）
      breakpoints: {
        768: {
          spaceBetween: 32,
          centeredSlides: false,
        },
        1280: {
          spaceBetween: 100,
          centeredSlides: false,
        },
      },

      on: {
        init: function () {
          const total = document.querySelector(".swiper-counter .total");
          total.textContent = this.slides.length - this.loopedSlides * 2; 
          updateCounter(this);
        },
        slideChange: function () {
          updateCounter(this);
        },
      },
    });

    function updateCounter(swiper) {
      const current = document.querySelector(".swiper-counter .current");

      // loop使用時、realIndex を使う
      current.textContent = swiper.realIndex + 1;
    }


      // フェードイン
      document.body.classList.add("page-loaded");
    });
  </script>
</body>
</html>
