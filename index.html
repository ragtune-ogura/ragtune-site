<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dev Shopify Ragutune</title>

  <!-- ページ固有CSS -->
  <link rel="stylesheet" href="./style.css" />

  <!-- Swiper CSS（headに置いてOK） -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"
  />
  <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Allura&family=Mulish:wght@200;400;700;900&family=Noto+Sans+JP:wght@300;400;700;900&display=swap"
    rel="stylesheet"
  />

  <!-- Adobe Fonts -->
  <link rel="stylesheet" href="https://use.typekit.net/duu5afd.css" />

  <!-- 共通スタイル -->
  <link rel="stylesheet" href="./style.css" />
</head>

<body>

  <!-- ▼ partials ▼ -->
  <div id="header-include"></div>
  <div id="section1-include"></div>
  <div id="section2-include"></div>
  <div id="section3-include"></div>
  <div id="section4-include"></div>
  <div id="footer-include"></div>

  <!-- ▼ partial include script ▼ -->
  <script>
    const includes = [
      { id: "header-include", file: "./partials/header.html" },
      { id: "section1-include", file: "./partials/section1.html" },
      { id: "section2-include", file: "./partials/section2.html" },
      { id: "section3-include", file: "./partials/section3.html" },
      { id: "section4-include", file: "./partials/section4.html" },
      { id: "footer-include", file: "./partials/footer.html" },
    ];

    Promise.all(
      includes.map((part) =>
        fetch(part.file)
          .then((res) => res.text())
          .then((html) => {
            document.getElementById(part.id).innerHTML = html;
          })
      )
    ).then(() => {
      // head-include に含まれなかった場合の対策（Swiper JS を読み込む）
      const swiperScript = document.createElement("script");
      swiperScript.src =
        "https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js";
      document.body.appendChild(swiperScript);

      // script.js 読み込み（これが1回だけ）
      const mainScript = document.createElement("script");
      mainScript.src = "./script.js";
      document.body.appendChild(mainScript);

      // partial 完了イベント
      document.dispatchEvent(new Event("partialsLoaded"));
    });
  </script>
</body>
</html>
